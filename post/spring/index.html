<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Spring Framework - WYJ&#39;s Notes</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">
    <link rel="canonical" href="https://w-yj.github.io/post/spring/">

    
    
    <link rel="stylesheet" type="text/css" href="https://w-yj.github.io/sass/pixyll.min.30e55e9fcc01694c576be315e114e0449103a0df1fb91cec0c2ada477ba30f6b.css">

    
    <link rel='stylesheet' type='text/css' href='//fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic' >
    <link rel='stylesheet' type='text/css' href='//fonts.googleapis.com/css?family=Lato:900,300'>
</head>

<body class="site">
    <div class="site-wrap">
        <header class="site-header px2 px-responsive">
    <div class="mt2 wrap">
        <div class="measure">
            <a href="https://w-yj.github.io" class="site-title">WYJ&#39;s Notes</a>
            <nav class="site-nav">
                
<div class="right">
<a href="https://w-yj.github.io/about/">About</a>
<a href="https://w-yj.github.io/tags/">Tags</a>
<a href="https://w-yj.github.io/contact/">Contact</a>
</div>
            </nav>
            <div class="clearfix"></div>
        </div>
    </div>
</header>

        <div class="post p2 p-responsive wrap" role="main">
            <div class="measure">
                
<div class="post-header mb2">
    <h1 class="py2">Spring Framework</h1>
    <span class="post-meta">
        Oct 5, 2017
        
    </span>
    <br>
    
</div>
<article class="post-content">
    <h1 id="spring-framework">Spring Framework</h1>
<!-- raw HTML omitted -->
<ul>
<li>Introduction</li>
<li>Inversion of Controlï¼š
<ul>
<li>Usages
<ul>
<li>Spring Bean Factory</li>
<li>ApplicationContext and Property initialization</li>
<li>Injection
<ul>
<li>Constructor Injection</li>
<li>Object Injection, Inner Beans, Aliases and idref</li>
</ul>
</li>
<li>Initializing Collections</li>
<li>Autowiring</li>
<li>Bean Scope</li>
<li>ApplicationAware&amp;BeanNameAware</li>
<li>Bean Definition Inheritance</li>
<li>Lifecycle Callbacks</li>
<li>BeanPostProcessor</li>
<li>BeanFactoryPostProcessor</li>
<li>Coding to Interface</li>
<li>Annotations
<ul>
<li>The Required Annotation</li>
<li>The Autowired Annotation</li>
</ul>
</li>
<li>JSR-250 Annotations</li>
<li>Component and Stereotype Annotations</li>
<li>Using MessageSource To Get Text From Property Files</li>
<li>Event Handling in Spring</li>
</ul>
</li>
</ul>
</li>
<li>Spring MVC
<ul>
<li>MVC Models</li>
</ul>
</li>
<li>ä»åŠ¨æ€ä»£ç†åˆ°SpringAOP
<ul>
<li>ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†</li>
<li>åŠ¨æ€ä»£ç†çš„å®ç°æ–¹å¼
<ul>
<li>jdkproxy</li>
<li>CGLIB</li>
</ul>
</li>
<li>SpringAOPä¸­åŠ¨æ€ä»£ç†çš„ä½“ç°</li>
</ul>
</li>
</ul>
<!-- raw HTML omitted -->
<h2 id="introduction">Introduction</h2>
<p><img src="https://w-yj.github.io/img/Spring/SpringFrameworkRuntime.png" alt="spingframework"></p>
<h2 id="inversion-of-control">Inversion of Controlï¼š</h2>
<p>æ§åˆ¶æŒ‡è°æ¥æ§åˆ¶å¯¹è±¡çš„åˆ›å»ºï¼Œä¼ ç»Ÿçš„åº”ç”¨ç¨‹åºå¯¹è±¡çš„åˆ›å»ºæ˜¯ç”±ç¨‹åºæœ¬èº«æ§åˆ¶çš„ï¼Œä½¿ç”¨ Spring åæ˜¯ç”± Spring æ¥åˆ›å»ºçš„ã€‚æ­£è½¬æŒ‡ç¨‹åºæ¥åˆ›å»ºå¯¹è±¡ï¼Œåè½¬æŒ‡ç¨‹åºæœ¬èº«ä¸å»åˆ›å»ºå¯¹è±¡ï¼Œè€Œå˜ä¸ºè¢«åŠ¨æ¥å—çš„å¯¹è±¡ã€‚</p>
<ul>
<li>iocæ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ã€‚ç”±ä¸»åŠ¨ç¼–ç¨‹å˜ä¸ºè¢«åŠ¨æ¥æ”¶</li>
<li>iocçš„å®ç°æ˜¯é€šè¿‡iocå®¹å™¨æ¥å®ç°çš„ã€‚</li>
<li>iocå®¹å™¨â€”â€”BeanFactoryã€‚</li>
</ul>
<p>ğŸ”—ï¼š<a href="https://martinfowler.com/articles/injection.html">IoCå®¹å™¨ï¼ˆIoc : Inversion of controlï¼‰å’ŒDependency Injectionæ¨¡å¼</a></p>
<h3 id="usages">Usages</h3>
<h4 id="spring-bean-factory">Spring Bean Factory</h4>
<p>ä½¿ç”¨spring frameworkæä¾›çš„åŸºæœ¬çš„å·¥å‚ç‰¹æ€§åˆ›å»ºå¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç”±springç®¡ç†ã€‚å¯¹è±¡å·¥å‚æ‰€åšçš„æ˜¯ä»é…ç½®æ–‡ä»¶ï¼ˆbluedprintï¼šspring.xmlï¼‰ä¸­è¯»å–è¯¥å¯¹è±¡å·¥å‚å¿…é¡»åˆ›å»ºçš„æ‰€æœ‰å¯¹è±¡ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Triangle</span> <span style="color:#f92672">{</span> 
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">draw</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Triangle drawn&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DrawingApp</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">//Triangle triangle = new Triangle();
</span><span style="color:#75715e"></span>        <span style="color:#75715e">//deprecated
</span><span style="color:#75715e"></span>        BeanFactory factory <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> XmlBeanFactory<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> FileSystemResource<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;spring.xml&#34;</span><span style="color:#f92672">));</span>
        Triangle triangle <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>Triangle<span style="color:#f92672">)</span> factory<span style="color:#f92672">.</span><span style="color:#a6e22e">getBean</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;triangle&#34;</span><span style="color:#f92672">);</span>
        triangle<span style="color:#f92672">.</span><span style="color:#a6e22e">draw</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>spring.xml</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#75715e">&lt;!DOCTYPE beans PUBLIC &#34;-//SPRING//DTD BEAN 2.0//EN&#34; &#34;http://www.springframework.org/dtd/spring-beans-2.0.dtd&#34;&gt;</span>
<span style="color:#f92672">&lt;beans&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;triangle&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.beanfactory.Triangle&#34;</span> <span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;/beans&gt;</span>
</code></pre></div><h4 id="applicationcontext-and-property-initialization">ApplicationContext and Property initialization</h4>
<p>ApplicationContextåŒ…å«ğŸ‘†çš„Beanfactoryæ‰€æœ‰çš„ç‰¹æ€§ä¹‹å¤–è¿˜æœ‰å…¶ä»–ç‰¹æ€§ï¼Œä¾‹å¦‚AOP</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Triangle</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> String type<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getType</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> type<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setType</span><span style="color:#f92672">(</span>String type<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">type</span> <span style="color:#f92672">=</span> type<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">draw</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getType</span><span style="color:#f92672">()</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; triangle drawn&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DrawingApp</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// spring.xmlç½®äºsrcä¸‹
</span><span style="color:#75715e"></span>        ApplicationContext context <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ClassPathXmlApplicationContext<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;spring.xml&#34;</span><span style="color:#f92672">);</span>
        Triangle triangle <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>Triangle<span style="color:#f92672">)</span> context<span style="color:#f92672">.</span><span style="color:#a6e22e">getBean</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;triangle&#34;</span><span style="color:#f92672">);</span>
        triangle<span style="color:#f92672">.</span><span style="color:#a6e22e">draw</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#75715e">&lt;!DOCTYPE beans PUBLIC &#34;-//SPRING//DTD BEAN 2.0//EN&#34; &#34;http://www.springframework.org/dtd/spring-beans-2.0.dtd&#34;&gt;</span>
<span style="color:#f92672">&lt;beans&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;triangle&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.applicationcontext.Triangle&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#75715e">&lt;!-- Property initialization --&gt;</span>
        <span style="color:#75715e">&lt;!-- Setter Injection --&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;type&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;Equilateral&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
<span style="color:#f92672">&lt;/beans&gt;</span>
</code></pre></div><h4 id="injection">Injection</h4>
<h5 id="constructor-injection">Constructor Injection</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Triangle</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> String type<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> height<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Triangle</span><span style="color:#f92672">(</span>String type<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">type</span> <span style="color:#f92672">=</span> type<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Triangle</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> height<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">height</span> <span style="color:#f92672">=</span> height<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Triangle</span><span style="color:#f92672">(</span>String type<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> height<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">type</span> <span style="color:#f92672">=</span> type<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">height</span> <span style="color:#f92672">=</span> height<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getType</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> type<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getHeight</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> height<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">draw</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getType</span><span style="color:#f92672">()</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; triangle drawn of height &#34;</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getHeight</span><span style="color:#f92672">());</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#75715e">&lt;!DOCTYPE beans PUBLIC &#34;-//SPRING//DTD BEAN 2.0//EN&#34; &#34;http://www.springframework.org/dtd/spring-beans-2.0.dtd&#34;&gt;</span>
<span style="color:#f92672">&lt;beans&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;triangle&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.constructorinjection.Triangle&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#75715e">&lt;!--  &lt;constructor-arg value=&#34;Equilateral&#34; /&gt; --&gt;</span>
        <span style="color:#75715e">&lt;!--  &lt;constructor-arg type=&#34;int&#34; value=&#34;20&#34;/&gt; --&gt;</span>
        <span style="color:#75715e">&lt;!--  &lt;constructor-arg type=&#34;java.lang.String&#34; value=&#34;20&#34;/&gt; --&gt;</span>
        <span style="color:#f92672">&lt;constructor-arg</span> <span style="color:#a6e22e">index=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;Equilateral&#34;</span><span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;constructor-arg</span> <span style="color:#a6e22e">index=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;20&#34;</span><span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
<span style="color:#f92672">&lt;/beans&gt;</span>
</code></pre></div><h5 id="object-injection-inner-beans-aliases-and-idref">Object Injection, Inner Beans, Aliases and idref</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> x<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> y<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getX</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> x<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setX</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> x<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">x</span> <span style="color:#f92672">=</span> x<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getY</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> y<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setY</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> y<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">y</span> <span style="color:#f92672">=</span> y<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Triangle</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> Point pointA<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> Point pointB<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> Point pointC<span style="color:#f92672">;</span>
    
    <span style="color:#66d9ef">public</span> Point <span style="color:#a6e22e">getPointA</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> pointA<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setPointA</span><span style="color:#f92672">(</span>Point pointA<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">pointA</span> <span style="color:#f92672">=</span> pointA<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> Point <span style="color:#a6e22e">getPointB</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> pointB<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setPointB</span><span style="color:#f92672">(</span>Point pointB<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">pointB</span> <span style="color:#f92672">=</span> pointB<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> Point <span style="color:#a6e22e">getPointC</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> pointC<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setPointC</span><span style="color:#f92672">(</span>Point pointC<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">pointC</span> <span style="color:#f92672">=</span> pointC<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">draw</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Point A = (&#34;</span><span style="color:#f92672">+</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getPointA</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getX</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;,&#34;</span><span style="color:#f92672">+</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getPointA</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getY</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;)&#34;</span><span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Point B = (&#34;</span><span style="color:#f92672">+</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getPointB</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getX</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;,&#34;</span><span style="color:#f92672">+</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getPointB</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getY</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;)&#34;</span><span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Point C = (&#34;</span><span style="color:#f92672">+</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getPointC</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getX</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;,&#34;</span><span style="color:#f92672">+</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getPointC</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getY</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;)&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DrawingApp</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        ApplicationContext context <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ClassPathXmlApplicationContext<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;spring.xml&#34;</span><span style="color:#f92672">);</span>
        Triangle triangle <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>Triangle<span style="color:#f92672">)</span> context<span style="color:#f92672">.</span><span style="color:#a6e22e">getBean</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;triangle-alias&#34;</span><span style="color:#f92672">);</span>
        triangle<span style="color:#f92672">.</span><span style="color:#a6e22e">draw</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div><p>spring.xml</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#75715e">&lt;!DOCTYPE beans PUBLIC &#34;-//SPRING//DTD BEAN 2.0//EN&#34; &#34;http://www.springframework.org/dtd/spring-beans-2.0.dtd&#34;&gt;</span>
<span style="color:#f92672">&lt;beans&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;triangle&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.injectobjects.Triangle&#34;</span>
        <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;triangle-name&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;pointA&#34;</span> <span style="color:#a6e22e">ref=</span><span style="color:#e6db74">&#34;point0&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;pointB&#34;</span><span style="color:#f92672">&gt;</span>
            <span style="color:#75715e">&lt;!-- inner bean --&gt;</span>
            <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.injectobjects.Point&#34;</span><span style="color:#f92672">&gt;</span>
                <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;-20&#34;</span> <span style="color:#f92672">/&gt;</span>
                <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
            <span style="color:#f92672">&lt;/bean&gt;</span>
        <span style="color:#f92672">&lt;/property&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;pointC&#34;</span> <span style="color:#a6e22e">ref=</span><span style="color:#e6db74">&#34;point2&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>

    <span style="color:#75715e">&lt;!-- Aliases --&gt;</span>
    <span style="color:#f92672">&lt;alias</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;triangle&#34;</span> <span style="color:#a6e22e">alias=</span><span style="color:#e6db74">&#34;triangle-alias&#34;</span> <span style="color:#f92672">/&gt;</span>

    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;point0&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.injectobjects.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>

    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;point2&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.injectobjects.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;20&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    <span style="color:#75715e">&lt;!-- &lt;idref/&gt;make sure that there is a bean with id... --&gt;</span>
<span style="color:#f92672">&lt;/beans&gt;</span>
</code></pre></div><h4 id="initializing-collections">Initializing Collections</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> java.util.List<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Triangle</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> List<span style="color:#f92672">&lt;</span>Point<span style="color:#f92672">&gt;</span> points<span style="color:#f92672">;</span>
    
    <span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>Point<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">getPoints</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> points<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setPoints</span><span style="color:#f92672">(</span>List<span style="color:#f92672">&lt;</span>Point<span style="color:#f92672">&gt;</span> points<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">points</span> <span style="color:#f92672">=</span> points<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">draw</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">for</span><span style="color:#f92672">(</span>Point point<span style="color:#f92672">:</span>points<span style="color:#f92672">)</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Point = (&#34;</span><span style="color:#f92672">+</span>point<span style="color:#f92672">.</span><span style="color:#a6e22e">getX</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;,&#34;</span><span style="color:#f92672">+</span>point<span style="color:#f92672">.</span><span style="color:#a6e22e">getY</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;)&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#75715e">&lt;!DOCTYPE beans PUBLIC &#34;-//SPRING//DTD BEAN 2.0//EN&#34; &#34;http://www.springframework.org/dtd/spring-beans-2.0.dtd&#34;&gt;</span>
<span style="color:#f92672">&lt;beans&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;triangle&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.collections.Triangle&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;points&#34;</span><span style="color:#f92672">&gt;</span>
            <span style="color:#f92672">&lt;list&gt;</span>
                <span style="color:#f92672">&lt;ref</span> <span style="color:#a6e22e">bean =</span> <span style="color:#e6db74">&#34;point0&#34;</span> <span style="color:#f92672">/&gt;</span>
                <span style="color:#f92672">&lt;ref</span> <span style="color:#a6e22e">bean =</span> <span style="color:#e6db74">&#34;point1&#34;</span> <span style="color:#f92672">/&gt;</span>
                <span style="color:#f92672">&lt;ref</span> <span style="color:#a6e22e">bean =</span> <span style="color:#e6db74">&#34;point2&#34;</span> <span style="color:#f92672">/&gt;</span>
            <span style="color:#f92672">&lt;/list&gt;</span>
        <span style="color:#f92672">&lt;/property&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;point0&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.collections.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;point1&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.collections.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;-20&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;point2&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.collections.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;20&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
<span style="color:#f92672">&lt;/beans&gt;</span>
</code></pre></div><h4 id="autowiring">Autowiring</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#75715e">&lt;!DOCTYPE beans PUBLIC &#34;-//SPRING//DTD BEAN 2.0//EN&#34; &#34;http://www.springframework.org/dtd/spring-beans-2.0.dtd&#34;&gt;</span>
<span style="color:#f92672">&lt;beans&gt;</span>
    <span style="color:#75715e">&lt;!-- scopeé»˜è®¤ä¸ºsingleton --&gt;</span>
    <span style="color:#75715e">&lt;!-- byname, byType, constructor  --&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;triangle&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.autowiringandscope.Triangle&#34;</span> <span style="color:#a6e22e">autowire=</span><span style="color:#e6db74">&#34;byName&#34;</span> <span style="color:#a6e22e">scope=</span><span style="color:#e6db74">&#34;prototype&#34;</span><span style="color:#f92672">/&gt;</span>
    
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;pointA&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.autowiringandscope.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;pointB&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.autowiringandscope.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;-20&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;pointC&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.autowiringandscope.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;20&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
<span style="color:#f92672">&lt;/beans&gt;</span>
</code></pre></div><h4 id="bean-scope">Bean Scope</h4>
<ul>
<li>Singleton(å’Œè®¾è®¡æ¨¡å¼ä¸­æ‰€è¯´çš„singletonä¸å®Œå…¨ç›¸åŒ) - Only once per Spring container</li>
<li>Prototype - New bean created with every request and referenceã€‚</li>
<li>Web-aware Context Bean Scope
<ul>
<li>Request - New bean per servlet request</li>
<li>Session - New bean per session</li>
<li>Globle Session - New bean per global HTTP session(portlet context)
é»˜è®¤ä¸ºSingleton,æ‰€ä»¥springå®¹å™¨ä¸­çš„beané»˜è®¤åœ¨å®¹å™¨åˆå§‹åŒ–çš„æ—¶å€™(spring load time)å°±åˆ›å»ºäº†ï¼Œè€Œéåœ¨è°ƒç”¨getBeanæ–¹æ³•æ—¶è°ƒç”¨ï¼Œè°ƒç”¨æ­¤æ–¹æ³•æ—¶ï¼Œspringå®¹å™¨ç›´æ¥å°†åˆ›å»ºå¥½çš„beanè¿”å›ç»™å®ƒã€‚ä½†æ˜¯å¦‚æœå°†scopeè®¾ç½®ä¸ºprototypeçš„è¯ï¼Œåˆ™æ¯æ¬¡ç­‰åˆ°è°ƒç”¨getBeanæ–¹æ³•æ—¶æ‰è°ƒç”¨ï¼Œå¹¶ä¸”æ¯æ¬¡éƒ½åˆ›å»ºæ–°çš„å®ä¾‹ã€‚</li>
</ul>
</li>
</ul>
<h4 id="applicationawarebeannameaware">ApplicationAware&amp;BeanNameAware</h4>
<p>é€šè¿‡å®ç°ApplicationAwareæ¥å£æ–¹æ³•å¯ä»¥è·å¾—ApplicationContextå¯¹è±¡ï¼›
é€šè¿‡å®ç°BeanNameAwareæ¥å£æ–¹æ³•å¯ä»¥è·å¾—è¯¥Beanåœ¨Spring.xmlé…ç½®æ–‡ä»¶ä¸­é…ç½®çš„nameï¼›</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> org.springframework.beans.BeansException<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.beans.factory.BeanNameAware<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.context.ApplicationContext<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.context.ApplicationContextAware<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Triangle</span> <span style="color:#66d9ef">implements</span> ApplicationContextAware<span style="color:#f92672">,</span> BeanNameAware <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> Point pointA<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> Point pointB<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> Point pointC<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> ApplicationContext context <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    
    <span style="color:#66d9ef">public</span> Point <span style="color:#a6e22e">getPointA</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> pointA<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setPointA</span><span style="color:#f92672">(</span>Point pointA<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">pointA</span> <span style="color:#f92672">=</span> pointA<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> Point <span style="color:#a6e22e">getPointB</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> pointB<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setPointB</span><span style="color:#f92672">(</span>Point pointB<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">pointB</span> <span style="color:#f92672">=</span> pointB<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> Point <span style="color:#a6e22e">getPointC</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> pointC<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setPointC</span><span style="color:#f92672">(</span>Point pointC<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">pointC</span> <span style="color:#f92672">=</span> pointC<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">draw</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Point A = (&#34;</span><span style="color:#f92672">+</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getPointA</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getX</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;,&#34;</span><span style="color:#f92672">+</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getPointA</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getY</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;)&#34;</span><span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Point B = (&#34;</span><span style="color:#f92672">+</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getPointB</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getX</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;,&#34;</span><span style="color:#f92672">+</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getPointB</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getY</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;)&#34;</span><span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Point C = (&#34;</span><span style="color:#f92672">+</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getPointC</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getX</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;,&#34;</span><span style="color:#f92672">+</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getPointC</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getY</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;)&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setBeanName</span><span style="color:#f92672">(</span>String beanName<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Bean name is &#34;</span><span style="color:#f92672">+</span>beanName<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setApplicationContext</span><span style="color:#f92672">(</span>ApplicationContext context<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> BeansException <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">context</span> <span style="color:#f92672">=</span> context<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="bean-definition-inheritance">Bean Definition Inheritance</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> java.util.List<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> com.iamwyj.beaninheritance.Point<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Triangle</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> List<span style="color:#f92672">&lt;</span>Point<span style="color:#f92672">&gt;</span> points<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>Point<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">getPoints</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> points<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setPoints</span><span style="color:#f92672">(</span>List<span style="color:#f92672">&lt;</span>Point<span style="color:#f92672">&gt;</span> points<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">points</span> <span style="color:#f92672">=</span> points<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">draw</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Point point <span style="color:#f92672">:</span> points<span style="color:#f92672">)</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Point = (&#34;</span> <span style="color:#f92672">+</span> point<span style="color:#f92672">.</span><span style="color:#a6e22e">getX</span><span style="color:#f92672">()</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;,&#34;</span> <span style="color:#f92672">+</span> point<span style="color:#f92672">.</span><span style="color:#a6e22e">getY</span><span style="color:#f92672">()</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;)&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#75715e">&lt;!DOCTYPE beans PUBLIC &#34;-//SPRING//DTD BEAN 2.0//EN&#34; &#34;http://www.springframework.org/dtd/spring-beans-2.0.dtd&#34;&gt;</span>
<span style="color:#f92672">&lt;beans&gt;</span>
    <span style="color:#75715e">&lt;!-- abstractå‘Šè¯‰springä¸è¦åˆ›å»ºbeanï¼Œè¿™æ˜¯ä¸€ä¸ªæ¨¡ç‰ˆï¼ˆtemplateï¼‰    --&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;parenttriangle&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.beaninheritance.Triangle&#34;</span>
        <span style="color:#a6e22e">abstract=</span><span style="color:#e6db74">&#34;true&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;points&#34;</span><span style="color:#f92672">&gt;</span>
            <span style="color:#f92672">&lt;list&gt;</span>
                <span style="color:#f92672">&lt;ref</span> <span style="color:#a6e22e">bean=</span><span style="color:#e6db74">&#34;pointA&#34;</span> <span style="color:#f92672">/&gt;</span>
            <span style="color:#f92672">&lt;/list&gt;</span>
        <span style="color:#f92672">&lt;/property&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>

    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;triangle1&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.beaninheritance.Triangle&#34;</span>
        <span style="color:#a6e22e">parent=</span><span style="color:#e6db74">&#34;parenttriangle&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;points&#34;</span><span style="color:#f92672">&gt;</span>
            <span style="color:#75715e">&lt;!-- mergeçš„æ„æ€æ˜¯åˆå¹¶ç»§æ‰¿çš„é›†åˆä¸­çš„å€¼ï¼Œå¦åˆ™ä¼šè¦†ç›– --&gt;</span>
            <span style="color:#f92672">&lt;list</span> <span style="color:#a6e22e">merge=</span><span style="color:#e6db74">&#34;true&#34;</span><span style="color:#f92672">&gt;</span>
                <span style="color:#f92672">&lt;ref</span> <span style="color:#a6e22e">bean=</span><span style="color:#e6db74">&#34;pointB&#34;</span> <span style="color:#f92672">/&gt;</span>
            <span style="color:#f92672">&lt;/list&gt;</span>
        <span style="color:#f92672">&lt;/property&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>

    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;pointA&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.beaninheritance.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;pointB&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.beaninheritance.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;-20&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;pointC&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.beaninheritance.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;20&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
<span style="color:#f92672">&lt;/beans&gt;</span>
</code></pre></div><h4 id="lifecycle-callbacks">Lifecycle Callbacks</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> com.iamwyj.lifecyclecallback<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> org.springframework.beans.factory.DisposableBean<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.beans.factory.InitializingBean<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Triangle</span> <span style="color:#66d9ef">implements</span> InitializingBean<span style="color:#f92672">,</span> DisposableBean<span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> Point pointA<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> Point pointB<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> Point pointC<span style="color:#f92672">;</span>
    
    <span style="color:#66d9ef">public</span> Point <span style="color:#a6e22e">getPointA</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> pointA<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setPointA</span><span style="color:#f92672">(</span>Point pointA<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">pointA</span> <span style="color:#f92672">=</span> pointA<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> Point <span style="color:#a6e22e">getPointB</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> pointB<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setPointB</span><span style="color:#f92672">(</span>Point pointB<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">pointB</span> <span style="color:#f92672">=</span> pointB<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> Point <span style="color:#a6e22e">getPointC</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> pointC<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setPointC</span><span style="color:#f92672">(</span>Point pointC<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">pointC</span> <span style="color:#f92672">=</span> pointC<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">draw</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Point A = (&#34;</span><span style="color:#f92672">+</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getPointA</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getX</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;,&#34;</span><span style="color:#f92672">+</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getPointA</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getY</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;)&#34;</span><span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Point B = (&#34;</span><span style="color:#f92672">+</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getPointB</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getX</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;,&#34;</span><span style="color:#f92672">+</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getPointB</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getY</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;)&#34;</span><span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Point C = (&#34;</span><span style="color:#f92672">+</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getPointC</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getX</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;,&#34;</span><span style="color:#f92672">+</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getPointC</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getY</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;)&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// æ–¹å¼äºŒé€šè¿‡åœ¨spring.xmlæ–‡ä»¶ä¸­é…ç½® 
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">myInit</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;My init method called for triangle&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">myDestroy</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;My destroy method called for triangle&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#75715e">// æ–¹å¼ä¸€é€šè¿‡å®ç°æ¥å£
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">afterPropertiesSet</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;InitializingBean init method called for triangle&#34;</span><span style="color:#f92672">);</span>     
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">destroy</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;DisposableBean destroy method called for triangle&#34;</span><span style="color:#f92672">);</span>       
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>


<span style="color:#f92672">import</span> org.springframework.context.support.AbstractApplicationContext<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.context.support.ClassPathXmlApplicationContext<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DrawingApp</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        AbstractApplicationContext context <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ClassPathXmlApplicationContext<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;spring.xml&#34;</span><span style="color:#f92672">);</span>
        context<span style="color:#f92672">.</span><span style="color:#a6e22e">registerShutdownHook</span><span style="color:#f92672">();</span>
        Triangle triangle <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>Triangle<span style="color:#f92672">)</span> context<span style="color:#f92672">.</span><span style="color:#a6e22e">getBean</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;triangle&#34;</span><span style="color:#f92672">);</span>
        triangle<span style="color:#f92672">.</span><span style="color:#a6e22e">draw</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#75715e">&lt;!DOCTYPE beans PUBLIC &#34;-//SPRING//DTD BEAN 2.0//EN&#34; &#34;http://www.springframework.org/dtd/spring-beans-2.0.dtd&#34;&gt;</span>
<span style="color:#75715e">&lt;!-- å…¨å±€é…ç½® --&gt;</span>
<span style="color:#f92672">&lt;beans</span> <span style="color:#a6e22e">default-init-method=</span><span style="color:#e6db74">&#34;myInit&#34;</span> <span style="color:#a6e22e">default-destroy-method=</span><span style="color:#e6db74">&#34;myDestroy&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#75715e">&lt;!-- é’ˆå¯¹å•ä¸ªçš„bean --&gt;</span>
    <span style="color:#75715e">&lt;!-- init-method=&#34;myInit&#34; destroy-method=&#34;myDestroy&#34; --&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;triangle&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.lifecyclecallback.Triangle&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;pointA&#34;</span> <span style="color:#a6e22e">ref=</span><span style="color:#e6db74">&#34;point0&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;pointB&#34;</span> <span style="color:#a6e22e">ref=</span><span style="color:#e6db74">&#34;point1&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;pointC&#34;</span> <span style="color:#a6e22e">ref=</span><span style="color:#e6db74">&#34;point2&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>

    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;point0&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.lifecyclecallback.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;point1&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.lifecyclecallback.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;-20&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;point2&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.lifecyclecallback.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;20&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
<span style="color:#f92672">&lt;/beans&gt;</span>
</code></pre></div><h4 id="beanpostprocessor">BeanPostProcessor</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> com.iamwyj.beanpostprocessor<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> org.springframework.beans.BeansException<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.beans.factory.config.BeanPostProcessor<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DisplayNameBeanPostProcessor</span> <span style="color:#66d9ef">implements</span> BeanPostProcessor <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> Object <span style="color:#a6e22e">postProcessAfterInitialization</span><span style="color:#f92672">(</span>Object bean<span style="color:#f92672">,</span> String beanName<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> BeansException <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;In after initialization method,  bean is &#34;</span><span style="color:#f92672">+</span> beanName<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> bean<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> Object <span style="color:#a6e22e">postProcessBeforeInitialization</span><span style="color:#f92672">(</span>Object bean<span style="color:#f92672">,</span> String beanName<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> BeansException<span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;In before initialization method,  bean is &#34;</span><span style="color:#f92672">+</span> beanName<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> bean<span style="color:#f92672">;</span>

    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#75715e">&lt;!DOCTYPE beans PUBLIC &#34;-//SPRING//DTD BEAN 2.0//EN&#34; &#34;http://www.springframework.org/dtd/spring-beans-2.0.dtd&#34;&gt;</span>
<span style="color:#f92672">&lt;beans</span> <span style="color:#a6e22e">default-init-method=</span><span style="color:#e6db74">&#34;myInit&#34;</span> <span style="color:#a6e22e">default-destroy-method=</span><span style="color:#e6db74">&#34;myDestroy&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;triangle&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.beanpostprocessor.Triangle&#34;</span><span style="color:#f92672">&gt;</span> <span style="color:#75715e">&lt;!-- init-method=&#34;myInit&#34; destroy-method=&#34;myDestroy&#34; --&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;pointA&#34;</span> <span style="color:#a6e22e">ref=</span><span style="color:#e6db74">&#34;point0&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;pointB&#34;</span> <span style="color:#a6e22e">ref=</span><span style="color:#e6db74">&#34;point1&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;pointC&#34;</span> <span style="color:#a6e22e">ref=</span><span style="color:#e6db74">&#34;point2&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>

    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;point0&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.beanpostprocessor.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;point1&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.beanpostprocessor.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;-20&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;point2&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.beanpostprocessor.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;20&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.beanpostprocessor.DisplayNameBeanPostProcessor&#34;</span> <span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;/beans&gt;</span>
</code></pre></div><p>è¿è¡Œç»“æœï¼š
<img src="https://w-yj.github.io/img/spring/BeanPostProcessor.png" alt="BeanPostProcessor"></p>
<h4 id="beanfactorypostprocessor">BeanFactoryPostProcessor</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> org.springframework.beans.BeansException<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.beans.factory.config.BeanFactoryPostProcessor<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.beans.factory.config.ConfigurableListableBeanFactory<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyBeanFactoryPP</span> <span style="color:#66d9ef">implements</span> BeanFactoryPostProcessor<span style="color:#f92672">{</span>
    <span style="color:#75715e">// beanfactoryåˆå§‹ä¹‹å‰æ—¶å€™æ‰§è¡Œ
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">postProcessBeanFactory</span><span style="color:#f92672">(</span>ConfigurableListableBeanFactory beanFactory<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> BeansException <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;My bean factory post processor method is called.&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#75715e">&lt;!DOCTYPE beans PUBLIC &#34;-//SPRING//DTD BEAN 2.0//EN&#34; &#34;http://www.springframework.org/dtd/spring-beans-2.0.dtd&#34;&gt;</span>
<span style="color:#f92672">&lt;beans</span> <span style="color:#a6e22e">default-init-method=</span><span style="color:#e6db74">&#34;myInit&#34;</span> <span style="color:#a6e22e">default-destroy-method=</span><span style="color:#e6db74">&#34;myDestroy&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;triangle&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.beanfactorypostprocessor.Triangle&#34;</span><span style="color:#f92672">&gt;</span> <span style="color:#75715e">&lt;!-- init-method=&#34;myInit&#34; destroy-method=&#34;myDestroy&#34; --&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;pointA&#34;</span> <span style="color:#a6e22e">ref=</span><span style="color:#e6db74">&#34;point0&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;pointB&#34;</span> <span style="color:#a6e22e">ref=</span><span style="color:#e6db74">&#34;point1&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;pointC&#34;</span> <span style="color:#a6e22e">ref=</span><span style="color:#e6db74">&#34;point2&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>

    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;point0&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.beanfactorypostprocessor.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#75715e">&lt;!-- property placeholder --&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;${pointA.pointX}&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;${pointA.pointY}&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;point1&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.beanfactorypostprocessor.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;-20&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;point2&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.beanfactorypostprocessor.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;20&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.beanfactorypostprocessor.MyBeanFactoryPP&#34;</span> <span style="color:#f92672">/&gt;</span>

    <span style="color:#75715e">&lt;!-- springæä¾›çš„bean factory post processor --&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&#34;</span> <span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;locations&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;pointsconfig.properties&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>

<span style="color:#f92672">&lt;/beans&gt;</span>
</code></pre></div><p>poinsconfig.properties</p>
<pre><code>pointA.pointX=0
pointA.pointY=0
</code></pre><p>è¿è¡Œç»“æœï¼š
<img src="https://w-yj.github.io/img/spring/BeanFactoryPostProcessor.png" alt="BeanPostFactoryProcessor"></p>
<h4 id="coding-to-interface">Coding to Interface</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> x<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> y<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getX</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> x<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setX</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> x<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">x</span> <span style="color:#f92672">=</span> x<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getY</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> y<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setY</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> y<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">y</span> <span style="color:#f92672">=</span> y<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Shape</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">draw</span><span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Triangle</span> <span style="color:#66d9ef">implements</span> Shape <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> Point pointA<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> Point pointB<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> Point pointC<span style="color:#f92672">;</span>
    
    <span style="color:#66d9ef">public</span> Point <span style="color:#a6e22e">getPointA</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> pointA<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setPointA</span><span style="color:#f92672">(</span>Point pointA<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">pointA</span> <span style="color:#f92672">=</span> pointA<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> Point <span style="color:#a6e22e">getPointB</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> pointB<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setPointB</span><span style="color:#f92672">(</span>Point pointB<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">pointB</span> <span style="color:#f92672">=</span> pointB<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> Point <span style="color:#a6e22e">getPointC</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> pointC<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setPointC</span><span style="color:#f92672">(</span>Point pointC<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">pointC</span> <span style="color:#f92672">=</span> pointC<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">draw</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Drawing Triangle&#34;</span><span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Point A = (&#34;</span><span style="color:#f92672">+</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getPointA</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getX</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;,&#34;</span><span style="color:#f92672">+</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getPointA</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getY</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;)&#34;</span><span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Point B = (&#34;</span><span style="color:#f92672">+</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getPointB</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getX</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;,&#34;</span><span style="color:#f92672">+</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getPointB</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getY</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;)&#34;</span><span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Point C = (&#34;</span><span style="color:#f92672">+</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getPointC</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getX</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;,&#34;</span><span style="color:#f92672">+</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getPointC</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getY</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;)&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Circle</span> <span style="color:#66d9ef">implements</span> Shape<span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> Point center<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">public</span> Point <span style="color:#a6e22e">getCenter</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> center<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setCenter</span><span style="color:#f92672">(</span>Point center<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">center</span> <span style="color:#f92672">=</span> center<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">draw</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Drawing Circle&#34;</span><span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Circle: Point is (&#34;</span><span style="color:#f92672">+</span>center<span style="color:#f92672">.</span><span style="color:#a6e22e">getX</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;,&#34;</span><span style="color:#f92672">+</span>center<span style="color:#f92672">.</span><span style="color:#a6e22e">getY</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;)&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>

<span style="color:#f92672">import</span> org.springframework.context.ApplicationContext<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.context.support.ClassPathXmlApplicationContext<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DrawingApp</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        ApplicationContext context <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ClassPathXmlApplicationContext<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;spring.xml&#34;</span><span style="color:#f92672">);</span>
        Shape shape <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>Shape<span style="color:#f92672">)</span> context<span style="color:#f92672">.</span><span style="color:#a6e22e">getBean</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;circle&#34;</span><span style="color:#f92672">);</span>
        shape<span style="color:#f92672">.</span><span style="color:#a6e22e">draw</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#75715e">&lt;!DOCTYPE beans PUBLIC &#34;-//SPRING//DTD BEAN 2.0//EN&#34; &#34;http://www.springframework.org/dtd/spring-beans-2.0.dtd&#34;&gt;</span>
<span style="color:#f92672">&lt;beans&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;triangle&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.codingtointerface.Triangle&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;pointA&#34;</span> <span style="color:#a6e22e">ref=</span><span style="color:#e6db74">&#34;point0&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;pointB&#34;</span> <span style="color:#a6e22e">ref=</span><span style="color:#e6db74">&#34;point1&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;pointC&#34;</span> <span style="color:#a6e22e">ref=</span><span style="color:#e6db74">&#34;point2&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;circle&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.codingtointerface.Circle&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;center&#34;</span> <span style="color:#a6e22e">ref=</span><span style="color:#e6db74">&#34;point0&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>

    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;point0&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.codingtointerface.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;point1&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.codingtointerface.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;-20&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;point2&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.codingtointerface.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;20&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
<span style="color:#f92672">&lt;/beans&gt;</span>
</code></pre></div><h4 id="annotations">Annotations</h4>
<h5 id="the-required-annotation">The Required Annotation</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> com.iamwyj.annotation<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> org.springframework.beans.factory.annotation.Required<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Circle</span> <span style="color:#66d9ef">implements</span> Shape<span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> Point center<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">public</span> Point <span style="color:#a6e22e">getCenter</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> center<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#a6e22e">@Required</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setCenter</span><span style="color:#f92672">(</span>Point center<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">center</span> <span style="color:#f92672">=</span> center<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">draw</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Drawing Circle&#34;</span><span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Circle: Point is (&#34;</span><span style="color:#f92672">+</span>center<span style="color:#f92672">.</span><span style="color:#a6e22e">getX</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;,&#34;</span><span style="color:#f92672">+</span>center<span style="color:#f92672">.</span><span style="color:#a6e22e">getY</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;)&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#f92672">&lt;beans</span> <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/beans&#34;</span>  
       <span style="color:#a6e22e">xmlns:xsi=</span><span style="color:#e6db74">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>  
       <span style="color:#a6e22e">xmlns:context=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/context&#34;</span>  
       <span style="color:#a6e22e">xsi:schemaLocation=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/beans  
</span><span style="color:#e6db74">           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd  
</span><span style="color:#e6db74">           http://www.springframework.org/schema/context  
</span><span style="color:#e6db74">           http://www.springframework.org/schema/context/spring-context-2.5.xsd&#34;</span><span style="color:#f92672">&gt;</span>  
          
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;circle&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.annotation.Circle&#34;</span> <span style="color:#f92672">/&gt;</span>

    <span style="color:#75715e">&lt;!-- @Requiredæ³¨è§£çš„bean processor --&gt;</span>
   <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;org.springframework.beans.factory.annotation.RequiredAnnotationBeanPostProcessor&#34;</span><span style="color:#f92672">/&gt;</span> 
<span style="color:#f92672">&lt;/beans&gt;</span>
</code></pre></div><h5 id="the-autowired-annotation">The Autowired Annotation</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> com.iamwyj.annotation<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> org.springframework.beans.factory.annotation.Autowired<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.beans.factory.annotation.Qualifier<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Circle</span> <span style="color:#66d9ef">implements</span> Shape<span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> Point center<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">public</span> Point <span style="color:#a6e22e">getCenter</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> center<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#a6e22e">@Autowired</span>
    <span style="color:#a6e22e">@Qualifier</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;circleRelated&#34;</span><span style="color:#f92672">)</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setCenter</span><span style="color:#f92672">(</span>Point center<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">center</span> <span style="color:#f92672">=</span> center<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">draw</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Drawing Circle&#34;</span><span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Circle: Point is (&#34;</span><span style="color:#f92672">+</span>center<span style="color:#f92672">.</span><span style="color:#a6e22e">getX</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;,&#34;</span><span style="color:#f92672">+</span>center<span style="color:#f92672">.</span><span style="color:#a6e22e">getY</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34;)&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>

</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#75715e">&lt;!-- xml namespace --&gt;</span>
<span style="color:#f92672">&lt;beans</span> <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/beans&#34;</span>  
       <span style="color:#a6e22e">xmlns:xsi=</span><span style="color:#e6db74">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>  
       <span style="color:#a6e22e">xmlns:context=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/context&#34;</span>  
       <span style="color:#a6e22e">xsi:schemaLocation=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/beans  
</span><span style="color:#e6db74">           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd  
</span><span style="color:#e6db74">           http://www.springframework.org/schema/context  
</span><span style="color:#e6db74">           http://www.springframework.org/schema/context/spring-context-2.5.xsd&#34;</span><span style="color:#f92672">&gt;</span>
      
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;circle&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.annotation.Circle&#34;</span> <span style="color:#f92672">/&gt;</span>

    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;point0&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.annotation.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;qualifier</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;circleRelated&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;center&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.annotation.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;-20&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    
    <span style="color:#75715e">&lt;!-- @@Autowiredæ³¨è§£ --&gt;</span>
    <span style="color:#f92672">&lt;bean</span>
        <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor&#34;</span> <span style="color:#f92672">/&gt;</span>--&gt;
    <span style="color:#75715e">&lt;!-- ä»¥ä¸Šæ‰€æœ‰çš„å…³äºæ³¨è§£çš„BeanPostProcessorçš„æ³¨å†Œå¯ä»¥è¢«ä»¥ä¸‹å¿«æ·æ–¹å¼æ›¿ä»£ --&gt;</span>
    <span style="color:#f92672">&lt;context:annotation-config/&gt;</span>    

<span style="color:#f92672">&lt;/beans&gt;</span>
</code></pre></div><h4 id="jsr-250-annotations">JSR-250 Annotations</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> com.iamwyj.jsrannotation<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> javax.annotation.PostConstruct<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> javax.annotation.PreDestroy<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> javax.annotation.Resource<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Circle</span> <span style="color:#66d9ef">implements</span> Shape <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> Point center<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> Point <span style="color:#a6e22e">getCenter</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> center<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Resource</span><span style="color:#f92672">(</span>name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;point2&#34;</span><span style="color:#f92672">)</span>
    <span style="color:#75715e">// å¦‚æœä¸è®¾ç½®nameå€¼ï¼Œä¼šé»˜è®¤å¯»æ‰¾åä¸ºcenterçš„beanè¿›è¡Œæ³¨å…¥
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setCenter</span><span style="color:#f92672">(</span>Point center<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">center</span> <span style="color:#f92672">=</span> center<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@PostConstruct</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">initializeCircle</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Init of Circle&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@PreDestroy</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">destroyCircle</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Destroy of Circle&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">draw</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Drawing Circle&#34;</span><span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Circle: Point is (&#34;</span> <span style="color:#f92672">+</span> center<span style="color:#f92672">.</span><span style="color:#a6e22e">getX</span><span style="color:#f92672">()</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;,&#34;</span> <span style="color:#f92672">+</span> center<span style="color:#f92672">.</span><span style="color:#a6e22e">getY</span><span style="color:#f92672">()</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;)&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>

<span style="color:#f92672">package</span> com.iamwyj.jsrannotation<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> org.springframework.context.support.AbstractApplicationContext<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.context.support.ClassPathXmlApplicationContext<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DrawingApp</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        AbstractApplicationContext context <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ClassPathXmlApplicationContext<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;spring.xml&#34;</span><span style="color:#f92672">);</span>
        context<span style="color:#f92672">.</span><span style="color:#a6e22e">registerShutdownHook</span><span style="color:#f92672">();</span>
        Shape shape <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>Shape<span style="color:#f92672">)</span> context<span style="color:#f92672">.</span><span style="color:#a6e22e">getBean</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;circle&#34;</span><span style="color:#f92672">);</span>
        shape<span style="color:#f92672">.</span><span style="color:#a6e22e">draw</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
<span style="color:#75715e">/* Output:
</span><span style="color:#75715e">* Init of Circle
</span><span style="color:#75715e">* Drawing Circle
</span><span style="color:#75715e">* Circle Point is: (20, 0)
</span><span style="color:#75715e">* Destroy of Circle
</span><span style="color:#75715e">*/</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#f92672">&lt;beans</span> <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/beans&#34;</span>
    <span style="color:#a6e22e">xmlns:xsi=</span><span style="color:#e6db74">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span> <span style="color:#a6e22e">xmlns:context=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/context&#34;</span>
    <span style="color:#a6e22e">xsi:schemaLocation=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/beans  
</span><span style="color:#e6db74">           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd  
</span><span style="color:#e6db74">           http://www.springframework.org/schema/context  
</span><span style="color:#e6db74">           http://www.springframework.org/schema/context/spring-context-2.5.xsd&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;circle&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.jsrannotation.Circle&#34;</span> <span style="color:#f92672">/&gt;</span>

     <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;point0&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.jsrannotation.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;qualifier</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;circleRelated&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;point1&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.jsrannotation.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;-20&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;point2&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.jsrannotation.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;20&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    
<span style="color:#f92672">&lt;/beans&gt;</span>
</code></pre></div><h4 id="component-and-stereotype-annotations">Component and Stereotype Annotations</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> com.iamwyj.stereotypeannotation<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> javax.annotation.PostConstruct<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> javax.annotation.PreDestroy<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> javax.annotation.Resource<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> org.springframework.stereotype.Component<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.stereotype.Controller<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.stereotype.Repository<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.stereotype.Service<span style="color:#f92672">;</span>
<span style="color:#75715e">//@Component //generic object
</span><span style="color:#75715e">//if marked as follows, spring will know what the class was doing.
</span><span style="color:#75715e">//@Service
</span><span style="color:#75715e">//@Repository //data object
</span><span style="color:#75715e"></span><span style="color:#a6e22e">@Controller</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Circle</span> <span style="color:#66d9ef">implements</span> Shape <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> Point center<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> Point <span style="color:#a6e22e">getCenter</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> center<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Resource</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setCenter</span><span style="color:#f92672">(</span>Point center<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">center</span> <span style="color:#f92672">=</span> center<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@PostConstruct</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">initializeCircle</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Init of Circle&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@PreDestroy</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">destroyCircle</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Destroy of Circle&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">draw</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Drawing Circle&#34;</span><span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Circle: Point is (&#34;</span> <span style="color:#f92672">+</span> center<span style="color:#f92672">.</span><span style="color:#a6e22e">getX</span><span style="color:#f92672">()</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;,&#34;</span> <span style="color:#f92672">+</span> center<span style="color:#f92672">.</span><span style="color:#a6e22e">getY</span><span style="color:#f92672">()</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;)&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#f92672">&lt;beans</span> <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/beans&#34;</span>
    <span style="color:#a6e22e">xmlns:xsi=</span><span style="color:#e6db74">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span> <span style="color:#a6e22e">xmlns:context=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/context&#34;</span>
    <span style="color:#a6e22e">xsi:schemaLocation=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/beans  
</span><span style="color:#e6db74">           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd  
</span><span style="color:#e6db74">           http://www.springframework.org/schema/context  
</span><span style="color:#e6db74">           http://www.springframework.org/schema/context/spring-context-2.5.xsd&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;context:annotation-config</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;triangle&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.stereotypeannotation.Triangle&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;pointA&#34;</span> <span style="color:#a6e22e">ref=</span><span style="color:#e6db74">&#34;point0&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;pointB&#34;</span> <span style="color:#a6e22e">ref=</span><span style="color:#e6db74">&#34;point1&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;pointC&#34;</span> <span style="color:#a6e22e">ref=</span><span style="color:#e6db74">&#34;point2&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>


    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;point0&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.stereotypeannotation.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;qualifier</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;circleRelated&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;point1&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.stereotypeannotation.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;-20&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;point2&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.stereotypeannotation.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;20&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;center&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.stereotypeannotation.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;6&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;20&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    
    <span style="color:#f92672">&lt;context:component-scan</span> <span style="color:#a6e22e">base-package=</span><span style="color:#e6db74">&#34;com.iamwyj.stereotypeannotation&#34;</span><span style="color:#f92672">/&gt;</span>
    
<span style="color:#f92672">&lt;/beans&gt;</span>
</code></pre></div><h4 id="using-messagesource-to-get-text-from-property-files">Using MessageSource To Get Text From Property Files</h4>
<p>æ–°å»ºmymessage.propertiesæ–‡ä»¶</p>
<pre><code>greeting=Hello!
drawing.circle=Drawing Circle!
drawing.point=Circle: Point is ({0},{1})
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#f92672">&lt;beans</span> <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/beans&#34;</span>
    <span style="color:#a6e22e">xmlns:xsi=</span><span style="color:#e6db74">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span> <span style="color:#a6e22e">xmlns:context=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/context&#34;</span>
    <span style="color:#a6e22e">xsi:schemaLocation=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/beans  
</span><span style="color:#e6db74">           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd  
</span><span style="color:#e6db74">           http://www.springframework.org/schema/context  
</span><span style="color:#e6db74">           http://www.springframework.org/schema/context/spring-context-2.5.xsd&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;context:annotation-config</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;point0&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.messagesource.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;qualifier</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;circleRelated&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;center&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.iamwyj.messagesource.Point&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;6&#34;</span> <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;y&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;20&#34;</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;messageSource&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;org.springframework.context.support.ResourceBundleMessageSource&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;property</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;basenames&#34;</span><span style="color:#f92672">&gt;</span>
            <span style="color:#f92672">&lt;list&gt;</span>
                <span style="color:#f92672">&lt;value&gt;</span>mymessages<span style="color:#f92672">&lt;/value&gt;</span>
            <span style="color:#f92672">&lt;/list&gt;</span>
        <span style="color:#f92672">&lt;/property&gt;</span>
    <span style="color:#f92672">&lt;/bean&gt;</span>
    <span style="color:#f92672">&lt;context:component-scan</span> <span style="color:#a6e22e">base-package=</span><span style="color:#e6db74">&#34;com.iamwyj.messagesource&#34;</span><span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;/beans&gt;</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> com.iamwyj.messagesource<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> javax.annotation.PostConstruct<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> javax.annotation.PreDestroy<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> javax.annotation.Resource<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> org.springframework.beans.factory.annotation.Autowired<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.context.MessageSource<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.stereotype.Component<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.stereotype.Controller<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.stereotype.Repository<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.stereotype.Service<span style="color:#f92672">;</span>
<span style="color:#75715e">//@Component //generic object
</span><span style="color:#75715e">//if marked as follows, spring will know what the class was doing.
</span><span style="color:#75715e">//@Service
</span><span style="color:#75715e">//@Repository //data object
</span><span style="color:#75715e"></span><span style="color:#a6e22e">@Controller</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Circle</span> <span style="color:#66d9ef">implements</span> Shape <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> Point center<span style="color:#f92672">;</span>
    <span style="color:#a6e22e">@Autowired</span>
    <span style="color:#66d9ef">private</span> MessageSource messageSource<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">public</span> MessageSource <span style="color:#a6e22e">getMessageSource</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> messageSource<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setMessageSource</span><span style="color:#f92672">(</span>MessageSource messageSource<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">messageSource</span> <span style="color:#f92672">=</span> messageSource<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> Point <span style="color:#a6e22e">getCenter</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> center<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Resource</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setCenter</span><span style="color:#f92672">(</span>Point center<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">center</span> <span style="color:#f92672">=</span> center<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@PostConstruct</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">initializeCircle</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Init of Circle&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@PreDestroy</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">destroyCircle</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Destroy of Circle&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">draw</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">messageSource</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getMessage</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;drawing.circle&#34;</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;Default Drawing Message&#34;</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">));</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">messageSource</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getMessage</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;drawing.point&#34;</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">new</span> Object<span style="color:#f92672">[]</span> <span style="color:#f92672">{</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">center</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getX</span><span style="color:#f92672">(),</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">center</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getY</span><span style="color:#f92672">()},</span> <span style="color:#e6db74">&#34;Default Points Message&#34;</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">));</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">messageSource</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getMessage</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;greeting&#34;</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;Default Greeting&#34;</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">));</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div><h4 id="event-handling-in-spring">Event Handling in Spring</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> com.iamwyj.eventhandling<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> org.springframework.context.ApplicationEvent<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DrawEvent</span> <span style="color:#66d9ef">extends</span> ApplicationEvent <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">DrawEvent</span><span style="color:#f92672">(</span>Object source<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">super</span><span style="color:#f92672">(</span>source<span style="color:#f92672">);</span>
        <span style="color:#75715e">// TODO Auto-generated constructor stub
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">toString</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;Draw Event Occured&#34;</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

<span style="color:#f92672">package</span> com.iamwyj.eventhandling<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> org.springframework.context.ApplicationEvent<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.context.ApplicationListener<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.stereotype.Component<span style="color:#f92672">;</span>
<span style="color:#a6e22e">@Component</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyEventListener</span> <span style="color:#66d9ef">implements</span> ApplicationListener <span style="color:#f92672">{</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onApplicationEvent</span><span style="color:#f92672">(</span>ApplicationEvent event<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>event<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">());</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

<span style="color:#f92672">package</span> com.iamwyj.eventhandling<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> javax.annotation.PostConstruct<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> javax.annotation.PreDestroy<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> javax.annotation.Resource<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> org.springframework.beans.factory.annotation.Autowired<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.context.ApplicationEventPublisher<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.context.ApplicationEventPublisherAware<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.context.MessageSource<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.stereotype.Component<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.stereotype.Controller<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.stereotype.Repository<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.stereotype.Service<span style="color:#f92672">;</span>

<span style="color:#75715e">//@Component //generic object
</span><span style="color:#75715e">//if marked as follows, spring will know what the class was doing.
</span><span style="color:#75715e">//@Service
</span><span style="color:#75715e">//@Repository //data object
</span><span style="color:#75715e"></span><span style="color:#a6e22e">@Controller</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Circle</span> <span style="color:#66d9ef">implements</span> Shape<span style="color:#f92672">,</span> ApplicationEventPublisherAware <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> Point center<span style="color:#f92672">;</span>
    <span style="color:#a6e22e">@Autowired</span>
    <span style="color:#66d9ef">private</span> MessageSource messageSource<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> ApplicationEventPublisher publisher<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> MessageSource <span style="color:#a6e22e">getMessageSource</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> messageSource<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setMessageSource</span><span style="color:#f92672">(</span>MessageSource messageSource<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">messageSource</span> <span style="color:#f92672">=</span> messageSource<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> Point <span style="color:#a6e22e">getCenter</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> center<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Resource</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setCenter</span><span style="color:#f92672">(</span>Point center<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">center</span> <span style="color:#f92672">=</span> center<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@PostConstruct</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">initializeCircle</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Init of Circle&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@PreDestroy</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">destroyCircle</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Destroy of Circle&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">draw</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">messageSource</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getMessage</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;drawing.circle&#34;</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;Default Drawing Message&#34;</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">));</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">messageSource</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getMessage</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;drawing.point&#34;</span><span style="color:#f92672">,</span>
                <span style="color:#66d9ef">new</span> Object<span style="color:#f92672">[]</span> <span style="color:#f92672">{</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">center</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getX</span><span style="color:#f92672">(),</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">center</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getY</span><span style="color:#f92672">()</span> <span style="color:#f92672">},</span> <span style="color:#e6db74">&#34;Default Points Message&#34;</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">));</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">messageSource</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getMessage</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;greeting&#34;</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;Default Greeting&#34;</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">));</span>
        DrawEvent drawEvent <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> DrawEvent<span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">);</span>
        publisher<span style="color:#f92672">.</span><span style="color:#a6e22e">publishEvent</span><span style="color:#f92672">(</span>drawEvent<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setApplicationEventPublisher</span><span style="color:#f92672">(</span>ApplicationEventPublisher publisher<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">publisher</span> <span style="color:#f92672">=</span> publisher<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h2 id="spring-mvc">Spring MVC</h2>
<blockquote>
<p>MVCè®¾è®¡æ€æƒ³ï¼šä»»ä½•é‡å®šå‘éƒ½èƒ½è§£è€¦åˆ</p>
</blockquote>
<p><img src="https://w-yj.github.io/img/Spring/springmvc.png" alt="springmvc"></p>
<h3 id="mvc-models">MVC Models</h3>
<ul>
<li>
<p>Model1ï¼šè€¦åˆå¤ªé«˜<br>
<img src="https://w-yj.github.io/img/Spring/MVC1.png" alt="MVC Model1"></p>
</li>
<li>
<p>Model2:<br>
<img src="https://w-yj.github.io/img/Spring/MVC2.png" alt="MVC Model2"></p>
</li>
<li>
<p>C/S:æ¨¡å‹å±‚ä¸»åŠ¨æ¨é€æ•°æ®åˆ°è§†å›¾</p>
</li>
<li>
<p>B/S:æ¨¡å‹å±‚ä¸èƒ½æ¨é€æ•°æ®åˆ°è§†å›¾å±‚</p>
</li>
</ul>
<p>mvcæ¡†æ¶è¦æ±‚:</p>
<ol>
<li>å°†urlæ˜ å°„åˆ°javaç±»æˆ–javaç±»çš„æ–¹æ³•</li>
<li>å°è£…ç”¨æˆ·æäº¤çš„æ•°æ®</li>
<li>å¤„ç†è¯·æ±‚â€”â€”è°ƒç”¨ç›¸å…³çš„ä¸šåŠ¡å¤„ç†å°è£…å“åº”çš„æ•°æ®</li>
<li>å°†å“åº”æ•°æ®çš„æ•°æ®è¿›è¡Œæ¸²æŸ“ï¼Œjspï¼Œhtmlï¼Œfreemakerç­‰</li>
</ol>
<h2 id="ä»åŠ¨æ€ä»£ç†åˆ°springaop">ä»åŠ¨æ€ä»£ç†åˆ°SpringAOP</h2>
<h3 id="ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†">ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†</h3>
<p>ä»£ç†æ¨¡å¼å¯ä»¥çœ‹ä½œå¯¹è°ƒç”¨ç›®æ ‡çš„åŒ…è£…ï¼Œè¿™æ ·å¯¹ç›®æ ‡ä»£ç çš„è°ƒç”¨ä¸æ˜¯ç›´æ¥å‘ç”Ÿçš„ï¼Œè€Œæ˜¯é€šè¿‡ä»£ç†å®Œæˆï¼Œå¾ˆå¤šåŠ¨æ€ä»£ç†åœºæ™¯ä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯è£…é¥°å™¨æ¨¡å¼çš„åº”ç”¨ã€‚ä»£ç†çš„ç›®çš„å¯ä»¥è®©è°ƒç”¨è€…ä¸å®ç°è¿™è§£è€¦ã€‚åŠ¨æ€ä»£ç†æ˜¯ä¸€ç§æ–¹ä¾¿è¿è¡Œæ—¶åŠ¨æ€æ„å»ºä»£ç†ã€åŠ¨æ€å¤„ç†ä»£ç†æ–¹æ³•è°ƒç”¨çš„æœºåˆ¶ï¼ŒPRCçš„è°ƒç”¨ä»¥åŠAOPéƒ½æ˜¯åŸºäºåŠ¨æ€ä»£ç†ï¼Œè¿™ä¹Ÿç”¨åˆ°äº†è®¾è®¡æ¨¡å¼ä¸­çš„ä»£ç†æ¨¡å¼ï¼Œå¯ä»¥è§£å†³å¾ˆå¤šç¹ççš„é‡å¤ç¼–ç¨‹ï¼Œè¿™ä¸€ç‚¹åœ¨SpringAOPä¸­å¯ä»¥ä½“ç°ï¼Œæ­¤å¤„çš„åŠ¨æ€è¡¨ç¤ºä»£ç†ç±»åœ¨è¿è¡Œæ—¶äº§ç”Ÿï¼Œè€ŒAspectJå¯¹ç›®æ ‡ä»£ç çš„ç”Ÿæˆåˆ™æ˜¯åœ¨ç¼–è¯‘æœŸç¼–ç»‡ã€‚</p>
<h3 id="åŠ¨æ€ä»£ç†çš„å®ç°æ–¹å¼">åŠ¨æ€ä»£ç†çš„å®ç°æ–¹å¼</h3>
<p>å®ç°åŠ¨æ€ä»£ç†çš„æ–¹å¼ä¸»è¦æœ‰Javaè‡ªèº«æä¾›çš„åŠ¨æ€ä»£ç†ï¼ˆåŸºäºåå°„ï¼‰ä»¥åŠcglibï¼ˆåŸºäºASMï¼Œç›´æ¥æ“ä½œå­—èŠ‚ç ï¼‰ï¼ŒASMæ¡†æ¶æ˜¯å¯¹å­—èŠ‚ç ç±»åº“çš„å°è£…ã€‚</p>
<h4 id="jdkproxy">jdkproxy</h4>
<blockquote>
<p>Javaè‡ªèº«æä¾›çš„åŠ¨æ€ä»£ç†ç”±äºæ˜¯jdkæœ¬çœæ”¯æŒçš„ï¼Œä¾èµ–å…³ç³»å°ï¼Œç®€åŒ–å¼€å‘ï¼Œæ˜“äºç»´æŠ¤ï¼Œä½†éœ€è¦è°ƒç”¨è€…å®ç°æ¥å£ï¼Œæ­¤ç§æ–¹å¼å…·æœ‰ä¾µå…¥æ€§ã€‚</p>
</blockquote>
<p>ä»£ç ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Hello</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sayHello</span><span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HelloImpl</span> <span style="color:#66d9ef">implements</span> Hello <span style="color:#f92672">{</span>
    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sayHello</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Hello World&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> java.lang.reflect.InvocationHandler<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.lang.reflect.Method<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyInvocationHandler</span> <span style="color:#66d9ef">implements</span> InvocationHandler <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> Object target<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">MyInvocationHandler</span><span style="color:#f92672">(</span>Object target<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">target</span> <span style="color:#f92672">=</span> target<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">//ä»£ç†å¯çœ‹ä½œæ˜¯å¯¹è°ƒç”¨ç›®æ ‡çš„åŒ…è£…
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> Object <span style="color:#a6e22e">invoke</span><span style="color:#f92672">(</span>Object proxy<span style="color:#f92672">,</span> Method method<span style="color:#f92672">,</span> Object<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Throwable <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Invoking sayHello!&#34;</span><span style="color:#f92672">);</span>
        Object result <span style="color:#f92672">=</span> method<span style="color:#f92672">.</span><span style="color:#a6e22e">invoke</span><span style="color:#f92672">(</span>target<span style="color:#f92672">,</span> args<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> result<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> java.lang.reflect.Proxy<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyDynamicProxy</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        HelloImpl hello <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HelloImpl<span style="color:#f92672">();</span>
        MyInvocationHandler handler <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MyInvocationHandler<span style="color:#f92672">(</span>hello<span style="color:#f92672">);</span>
        <span style="color:#75715e">//æ„é€ ä»£ç å®ä¾‹
</span><span style="color:#75715e"></span>        Hello proxyHello <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>Hello<span style="color:#f92672">)</span> Proxy<span style="color:#f92672">.</span><span style="color:#a6e22e">newProxyInstance</span><span style="color:#f92672">(</span>HelloImpl<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getClassLoader</span><span style="color:#f92672">(),</span> HelloImpl<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getInterfaces</span><span style="color:#f92672">(),</span> handler<span style="color:#f92672">);</span>
        <span style="color:#75715e">//ä½¿ç”¨ä»£ç†æ–¹æ³•
</span><span style="color:#75715e"></span>        proxyHello<span style="color:#f92672">.</span><span style="color:#a6e22e">sayHello</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>//TODO
æ„é€ å‡½æ•°åº•å±‚æºç ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> Object <span style="color:#a6e22e">newProxyInstance</span><span style="color:#f92672">(</span>ClassLoader loader<span style="color:#f92672">,</span>
                                          Class<span style="color:#f92672">&lt;?&gt;[]</span> interfaces<span style="color:#f92672">,</span>
                                          InvocationHandler h<span style="color:#f92672">)</span>
        <span style="color:#66d9ef">throws</span> IllegalArgumentException
    <span style="color:#f92672">{</span>
        Objects<span style="color:#f92672">.</span><span style="color:#a6e22e">requireNonNull</span><span style="color:#f92672">(</span>h<span style="color:#f92672">);</span>

        <span style="color:#66d9ef">final</span> Class<span style="color:#f92672">&lt;?&gt;[]</span> intfs <span style="color:#f92672">=</span> interfaces<span style="color:#f92672">.</span><span style="color:#a6e22e">clone</span><span style="color:#f92672">();</span>
        <span style="color:#66d9ef">final</span> SecurityManager sm <span style="color:#f92672">=</span> System<span style="color:#f92672">.</span><span style="color:#a6e22e">getSecurityManager</span><span style="color:#f92672">();</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>sm <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            checkProxyAccess<span style="color:#f92672">(</span>Reflection<span style="color:#f92672">.</span><span style="color:#a6e22e">getCallerClass</span><span style="color:#f92672">(),</span> loader<span style="color:#f92672">,</span> intfs<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>

        <span style="color:#75715e">/*
</span><span style="color:#75715e">         * Look up or generate the designated proxy class.
</span><span style="color:#75715e">         */</span>
        Class<span style="color:#f92672">&lt;?&gt;</span> cl <span style="color:#f92672">=</span> getProxyClass0<span style="color:#f92672">(</span>loader<span style="color:#f92672">,</span> intfs<span style="color:#f92672">);</span>

        <span style="color:#75715e">/*
</span><span style="color:#75715e">         * Invoke its constructor with the designated invocation handler.
</span><span style="color:#75715e">         */</span>
        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>sm <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                checkNewProxyPermission<span style="color:#f92672">(</span>Reflection<span style="color:#f92672">.</span><span style="color:#a6e22e">getCallerClass</span><span style="color:#f92672">(),</span> cl<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>

            <span style="color:#66d9ef">final</span> Constructor<span style="color:#f92672">&lt;?&gt;</span> cons <span style="color:#f92672">=</span> cl<span style="color:#f92672">.</span><span style="color:#a6e22e">getConstructor</span><span style="color:#f92672">(</span>constructorParams<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">final</span> InvocationHandler ih <span style="color:#f92672">=</span> h<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(!</span>Modifier<span style="color:#f92672">.</span><span style="color:#a6e22e">isPublic</span><span style="color:#f92672">(</span>cl<span style="color:#f92672">.</span><span style="color:#a6e22e">getModifiers</span><span style="color:#f92672">()))</span> <span style="color:#f92672">{</span>
                AccessController<span style="color:#f92672">.</span><span style="color:#a6e22e">doPrivileged</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> PrivilegedAction<span style="color:#f92672">&lt;</span>Void<span style="color:#f92672">&gt;()</span> <span style="color:#f92672">{</span>
                    <span style="color:#66d9ef">public</span> Void <span style="color:#a6e22e">run</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
                        cons<span style="color:#f92672">.</span><span style="color:#a6e22e">setAccessible</span><span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>
                        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                    <span style="color:#f92672">}</span>
                <span style="color:#f92672">});</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">return</span> cons<span style="color:#f92672">.</span><span style="color:#a6e22e">newInstance</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> Object<span style="color:#f92672">[]{</span>h<span style="color:#f92672">});</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>IllegalAccessException<span style="color:#f92672">|</span>InstantiationException e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> InternalError<span style="color:#f92672">(</span>e<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(),</span> e<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>InvocationTargetException e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            Throwable t <span style="color:#f92672">=</span> e<span style="color:#f92672">.</span><span style="color:#a6e22e">getCause</span><span style="color:#f92672">();</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>t <span style="color:#66d9ef">instanceof</span> RuntimeException<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">throw</span> <span style="color:#f92672">(</span>RuntimeException<span style="color:#f92672">)</span> t<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> InternalError<span style="color:#f92672">(</span>t<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(),</span> t<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>NoSuchMethodException e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> InternalError<span style="color:#f92672">(</span>e<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(),</span> e<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
</code></pre></div><h4 id="cglib">CGLIB</h4>
<blockquote>
<p>cglibä¸éœ€è¦é™å®šè°ƒç”¨è€…å®ç°æ¥å£ï¼Œä¹Ÿä¸å¿…ä¸ºå…¶ä»–ç›¸å…³ç±»å¢åŠ å·¥ä½œé‡ï¼Œå› æ­¤æ€§èƒ½æ›´é«˜ã€‚</p>
</blockquote>
<p>ä½¿ç”¨ä»£ç ç¤ºä¾‹:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">sayHello</span><span style="color:#f92672">(</span>String name<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;-- æ­£åœ¨æ‰§è¡ŒsayHelloæ–¹æ³• --&#34;</span><span style="color:#f92672">);</span>
        <span style="color:#75715e">//è¿”å›ç®€å•çš„å­—ç¬¦ä¸²
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> name <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; Hello, cglib proxy&#34;</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">eat</span><span style="color:#f92672">(</span>String food<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;æˆ‘æ­£åœ¨åƒï¼š&#34;</span> <span style="color:#f92672">+</span> food<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> org.springframework.cglib.proxy.Enhancer<span style="color:#f92672">;</span>

<span style="color:#75715e">//æ­¤ç±»ä¼šé€šè¿‡CGLIBæ¥ä¸ºPersonç”Ÿæˆä»£ç†ç±»
</span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PersonProxyFactory</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> Person <span style="color:#a6e22e">getAuthInstance</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        Enhancer en <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Enhancer<span style="color:#f92672">();</span>
        <span style="color:#75715e">//è®¾ç½®è¦ä»£ç†çš„ç›®æ ‡ç±»
</span><span style="color:#75715e"></span>        en<span style="color:#f92672">.</span><span style="color:#a6e22e">setSuperclass</span><span style="color:#f92672">(</span>Person<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">);</span>
        <span style="color:#75715e">//è®¾ç½®è¦ä»£ç†çš„æ‹¦æˆªå™¨
</span><span style="color:#75715e"></span>        en<span style="color:#f92672">.</span><span style="color:#a6e22e">setCallback</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> AroundAdvice<span style="color:#f92672">());</span>
        <span style="color:#75715e">//ç”Ÿæˆä»£ç†ç±»çš„å®ä¾‹
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>Person<span style="color:#f92672">)</span> en<span style="color:#f92672">.</span><span style="color:#a6e22e">create</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> org.springframework.cglib.proxy.MethodInterceptor<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.cglib.proxy.MethodProxy<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.lang.reflect.Method<span style="color:#f92672">;</span>

<span style="color:#75715e">//å…ˆä¸º CGLIB æä¾›ä¸€ä¸ªæ‹¦æˆªå™¨å®ç°ç±»
</span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">AroundAdvice</span> <span style="color:#66d9ef">implements</span> MethodInterceptor <span style="color:#f92672">{</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> Object <span style="color:#a6e22e">intercept</span><span style="color:#f92672">(</span>Object target<span style="color:#f92672">,</span> Method method<span style="color:#f92672">,</span> Object<span style="color:#f92672">[]</span> objects<span style="color:#f92672">,</span> MethodProxy methodProxy<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Throwable <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;æ‰§è¡Œå¼€å§‹æ–¹æ³•å‰ï¼Œæ¨¡æ‹Ÿå¼€å§‹äº‹ç‰©...&#34;</span><span style="color:#f92672">);</span>
        <span style="color:#75715e">//æ‰§è¡Œç›®æ ‡æ–¹æ³•ï¼Œå¹¶ä¿å­˜ç›®æ ‡æ–¹æ³•æ‰§è¡Œåçš„è¿”å›å€¼
</span><span style="color:#75715e"></span>        Object rvt <span style="color:#f92672">=</span> methodProxy<span style="color:#f92672">.</span><span style="color:#a6e22e">invokeSuper</span><span style="color:#f92672">(</span>target<span style="color:#f92672">,</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">[]{</span><span style="color:#e6db74">&#34;è¢«æ”¹å˜çš„å‚æ•°&#34;</span><span style="color:#f92672">});</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;æ‰§è¡Œç›®æ ‡æ–¹æ³•ä¹‹åï¼Œæ¨¡æ‹Ÿç»“æŸäº‹ç‰©...&#34;</span><span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> rvt<span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; æ–°å¢çš„å†…å®¹&#34;</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Main</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        Person person<span style="color:#f92672">=</span> PersonProxyFactory<span style="color:#f92672">.</span><span style="color:#a6e22e">getAuthInstance</span><span style="color:#f92672">();</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>person<span style="color:#f92672">.</span><span style="color:#a6e22e">sayHello</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;å­™æ‚Ÿç©º&#34;</span><span style="color:#f92672">));</span>
        person<span style="color:#f92672">.</span><span style="color:#a6e22e">eat</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;è¥¿ç“œ&#34;</span><span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>person<span style="color:#f92672">.</span><span style="color:#a6e22e">getClass</span><span style="color:#f92672">());</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="springaopä¸­åŠ¨æ€ä»£ç†çš„ä½“ç°">SpringAOPä¸­åŠ¨æ€ä»£ç†çš„ä½“ç°</h3>
<ul>
<li>äº‹ç‰©æ§åˆ¶</li>
<li>åŠ¨æ€ä»£ç†</li>
<li>è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆä¸€ä¸ªjavaç±»</li>
</ul>

</article>


<p class="post-meta">
    Tags:&nbsp;
    
    
    <a href="https://w-yj.github.io/tags/Java">Java</a>
    
</p>



            </div>
        </div>
    </div>
    <footer class="center">
    <div class="p2 wrap">
        <div class="measure mt1 center">
            <small>
                Copyright &#169; 2017<br>
                Powered by <a href="http://gohugo.io/" target="_blank">Hugo</a> &amp; <a
                    href="https://github.com/azmelanar/hugo-theme-pixyll" target="_blank">Pixyll</a>
            </small>
        </div>
    </div>
</footer>

</body>
</html>